/* src/styles/layout.css */
@import "./variables.css";

/* Core App Layout */
.main-view {
  width: 100vw;
  height: 100vh;
  background: #000; 
  position: relative;
  overflow: hidden;
  display: block;
}

.canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  z-index: var(--z-background);
}

/* Background Grid */
.grid-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: radial-gradient( circle, rgba(var(--color-primary-rgb), 0.1) 1px, transparent 1px );
  background-size: 20px 20px;
  pointer-events: none;
  opacity: 1;
  z-index: 0; 
}

/* Centered Logo */
.entity-logo {
  position: absolute;
  bottom: var(--space-lg);
  left: 50%;
  transform: translateX(-50%);
  max-width: 200px;
  z-index: var(--z-ui); 
  opacity: 1;
  transition: all var(--transition-slow) ease;
}

/* 
   UI Elements Container: RETINA PERFORMANCE FIX
   Restoring full coverage but enforcing a separate compositing layer.
*/
.ui-elements-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  /* CRITICAL: Container ignores clicks, children re-enable them */
  pointer-events: none;
  z-index: var(--z-ui); 
  
  /* GPU ISOLATION BLOCK - Stops the Retina Blur lag */
  isolation: isolate;
  transform: translateZ(0);
  backface-visibility: hidden;
  
  transition: opacity 0.4s ease-in-out;
}

/* Re-enable interactions for all actual UI elements inside the container */
.ui-elements-container > * {
  pointer-events: auto;
}

.ui-elements-container.visible {
  opacity: 1;
}

.ui-elements-container.hidden-by-opacity {
  opacity: 0;
}

/* UI Controls Layout */
.bottom-center-controls {
  position: fixed;
  bottom: var(--space-md);
  left: 50%;
  transform: translateX(-50%);
  z-index: var(--z-controls);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  /* Retina Fix: Moving sliders + Blur = Lag. We disable blur for this moving group. */
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* Status Display */
.status-display {
  position: fixed;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  z-index: var(--z-top);
  backdrop-filter: blur(var(--blur-amount, 3px));
  -webkit-backdrop-filter: blur(var(--blur-amount, 3px));
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  font-size: var(--font-size-md);
  font-weight: 500;
  text-align: center;
  min-width: 250px;
  transition: opacity 500ms ease-in-out;
  opacity: 1;
  pointer-events: none;
}
.status-display.info-state {
  background: rgba(var(--color-warning-rgb), 0.25);
  border: 1px solid var(--color-warning-a50);
  color: var(--color-warning, #ffa500);
}
.status-display.error-state {
  background: rgba(var(--color-error-rgb), 0.25);
  border: 1px solid var(--color-error-a50);
  color: var(--color-error, #ff5555);
}

.loading-indicator-pill {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: var(--z-top);
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-lg);
  background: var(--color-glass-bg-dark);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease-in-out;
}
.loading-indicator-pill.visible {
  opacity: 1;
  visibility: visible;
}

.fps-counter {
  position: fixed;
  bottom: var(--space-sm, 12px);
  left: var(--space-sm, 12px);
  z-index: 10001;
  pointer-events: none;
  background: rgba(0, 0, 0, 0.4);
  color: var(--color-text-dim, rgba(255, 255, 255, 0.4));
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-family: monospace;
  opacity: 0.7;
}

/* Bottom Right Icons Container */
.bottom-right-icons {
  position: fixed;
  bottom: var(--space-lg);
  right: var(--space-lg);
  z-index: var(--z-controls);
  display: flex;
  flex-direction: column-reverse; 
  align-items: center; 
  gap: var(--space-sm); 
  pointer-events: auto;
}

.general-connect-pill {
  position: fixed;
  bottom: calc(var(--space-md) + 36px + var(--space-sm));
  left: 50%;
  transform: translateX(-50%);
  background-color: var(--color-warning-a10);
  color: var(--color-warning-a90);
  padding: 8px 16px;
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  border: 1px solid var(--color-warning-a30);
  z-index: var(--z-top);
  text-align: center;
  animation: fadeIn 0.3s ease-out;
}