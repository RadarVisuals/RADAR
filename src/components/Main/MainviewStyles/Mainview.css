/* src/components/Main/MainviewStyles/Mainview.css */
@import "../../../styles/variables.css";

.main-view {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background-color: #000000;
}

.canvas-container {
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  display: block;
  /* FIX: Ensure we have a clean compositing context without overkill scaling */
  transform: translateZ(0); 
  will-change: opacity;
  opacity: 1;
  visibility: visible;
  background: radial-gradient( circle at center, var(--color-bg-light) 0%, #000000 100% );
  z-index: 1;
  transition: opacity 0.5s ease-in-out;
}

/* --- VIDEO MAPPING MODE OVERRIDES --- */
.canvas-container.mapping-active {
  background: #000000 !important;
}

.canvas-container.mapping-active .grid-overlay {
  display: none !important;
}

/* New class for the workspace fade-out state */
.canvas-container.workspace-fading-out {
  opacity: 0;
}

.main-view.overlay-animating .canvas-container {
  opacity: 0.6;
  transition: opacity 0.05s linear; 
}

.grid-overlay {
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
  background-image:
    linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
  background-size: 20px 20px;
  z-index: 2;
  pointer-events: none;
}

/* --- FIX: REMOVED 110% SCALING OVERHEAD --- */
.pixi-canvas {
  position: absolute;
  /* We match the viewport exactly. 
     The parallax "bleed" is now handled via internal sprite math, 
     not by blowing up the HTML element. */
  width: 100% !important;
  height: 100% !important;
  top: 0; 
  left: 0;
  display: block;
  backface-visibility: hidden;
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* --- DECK LAYERING --- */
.canvas.layer-1.canvas-deck-a { z-index: 3; }
.canvas.layer-1.canvas-deck-b { z-index: 4; }
.canvas.layer-2.canvas-deck-a { z-index: 5; }
.canvas.layer-2.canvas-deck-b { z-index: 6; }
.canvas.layer-3.canvas-deck-a { z-index: 7; }
.canvas.layer-3.canvas-deck-b { z-index: 8; }

.status-display {
  position: fixed;
  top: 75%; 
  left: 50%;
  transform: translate(-50%, -50%); 
  z-index: var(--z-top);
  backdrop-filter: blur(var(--blur-amount, 3px));
  -webkit-backdrop-filter: blur(var(--blur-amount, 3px));
  box-shadow: var(--shadow-md);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  font-size: var(--font-size-md);
  font-weight: 500;
  text-align: center;
  min-width: 250px;
  transition: opacity 1000ms cubic-bezier(0.2, 0.8, 0.2, 1); 
  opacity: 1;
  pointer-events: none;
}

.status-display.info-state {
  background: rgba(var(--color-warning-rgb), 0.25);
  border: 1px solid var(--color-warning-a50, rgba(255, 165, 0, 0.5));
  color: var(--color-warning, #ffa500);
}

.status-display.error-state {
  background: rgba(var(--color-error-rgb), 0.25);
  border: 1px solid var(--color-error-a50, rgba(255, 85, 85, 0.5));
  color: var(--color-error, #ff5555);
}

.status-display.fade-out {
  opacity: 0;
}

#fullscreen-root.radar-cursor {
  cursor: url('/assets/cursors/radar-dot.svg') 8 8, auto;
}

.click-ping-svg-container {
  position: fixed;
  transform: translate(-50%, -50%);
  width: 40px; 
  height: 40px;
  pointer-events: none;
  z-index: 10001;
}

.ping-svg-animation .click-ping-svg circle {
  animation: ping-circle-anim-simple 0.7s linear forwards;
}

@keyframes ping-circle-anim-simple {
  0% {
    r: 2;
    stroke-opacity: 1;
    transform: scale(0.1);
  }
  100% {
    r: 30; 
    stroke-opacity: 0;
    transform: scale(2.5); 
  }
}